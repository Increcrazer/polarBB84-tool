# PBB84analysis
## 基本功能
用于进行偏振调制BB84量子光源的性能测试，具有以下特性：
- 一键操作：用户仅需按下“确定”键即可以看到量子光源性能参数
- 分为治之：每个维度的性能都开一个面板，追求实用

## 用户输入参数
每个面板的用户输入参数定义相同
- 数据名称
    - LD面板：用户输入xx，读取LD-xx.csv文件
    - SDV面板：用户输入xx，读取SDV-xx.csv文件
    - PNRL面板：用户输入xx，读取CH1-xx.csv~CH4-xx.csv文件
    - SDVPNRL面板：用户输入xx，读取CH1-xx.csv~CH4-xx.csv文件
- 频率：系统重频
- 寻峰间距：由系统重频和TDC采样bin宽决定，一般取0.9*T/binwidth。例如，对于1.25G重频，binwidth为16 ps时，取寻峰间距为45
- 门宽：用于实际实验时的门宽内采样，用于计算门宽对比度等。对于SDV面板和PNRL面板，可以手动输入或自动寻优
- 阈值：设置强度判定门限，例如设置“S态阈值”为1000,则判定所有峰值计数>1000的脉冲都是S态。当没有找到符合阈值的脉冲时，Matlab会自动报错，此时只要尝试重新输入合理阈值即可
- 延时：将指定通道数据进行人为延时
- 效率：对于偏振态性能测试相当重要，输入探测端的效率，即可准确求解对比度、PDL等参数

另外，用户还可以自定义图像横坐标范围以及纵坐标对数/线性显示。仅需拖动滑块，勾选数/线性显示按钮，再按“确定”键即可。

## 各面板功能
### LD面板
- 脉冲宽度测量功能：脉冲3dB宽度和20dB宽度，都是平均值
- 测量频率和标准差：脉冲频率和标准差

典型测量结果如下：
![](https://s2.loli.net/2025/12/28/39EwlyDLz4Ocubj.png)

### SDV面板
- 脉冲宽度测量功能：各种脉冲3dB宽度和20dB宽度，都是平均值
- 上升（下降）时间测量功能：10dB宽度和0.46dB宽度对应90%和10%宽度，可用于计算10%~90%上升时间
- 变异系数：定义为标准差/平均值，用来衡量脉冲峰值强度稳定性
- 对比度测量功能：包括S/D和S/V的峰值对比度以及门宽对比度测量
- 最优门宽寻找：自动寻找对比度最高时对应的门宽，门宽扫描结果在门宽分析面板中:
    ![](https://s2.loli.net/2025/12/28/nzXRmjpub8BNYLM.png)
典型测量结果如下：

![](https://s2.loli.net/2025/12/28/NDcuoJghBpCFKev.png)

### PNRL面板
CH1-CH4通道分别对应PNRL测量基，用户应遵循该定义进行数据采集。
- 脉冲宽度测量功能：各种脉冲3dB宽度和20dB宽度，都是平均值
- 变异系数：定义为标准差/平均值，用来衡量脉冲峰值强度稳定性，主通道和次通道表示和偏振态对应和垂直的通道
- 对比度、误码率：包括峰值、门宽对比度和误码率的平均值
- PDL：求解每种偏振态门宽内计数平均值，然后找到其中的最大值max和最小值min，计算10log10(max/min)
- 最优门宽寻找：自动寻找对比度最高时对应的门宽，门宽扫描结果在门宽分析面板中:

![](https://s2.loli.net/2025/12/28/rFv1fp4nu9sIUbY.png)
典型测量结果如下：

![](https://s2.loli.net/2025/12/28/8dD31YywCASMKVI.png)

### SDVPNRL面板
CH1-CH4通道分别对应PNRL测量基，用户应遵循该定义进行数据采集。


# PBB84scope_analysis
## 基本功能
用于进行偏振调制BB84量子光源的在线调试和采集，具有以下特性：
- 实用：可以4个通道同时观察
- 在线对比度计算：可以选取单通道两个脉冲的位置，进行对比度计算
- 即时数据处理：配备轻量化性能测试功能，在调试和采集的同时可以进行类似PBB84analysis进行的分析操作

## 用户输入参数

